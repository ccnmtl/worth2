/*
 * Flowplayer 5.5.2
 *
 * The Flowplayer Free version is released under the
 * GNU GENERAL PUBLIC LICENSE Version 3 (GPL).
 */
// auto-install (any video tag with parent .flowplayer)
// keep track of players
// jQuery plugin
$(function(){"function"==typeof $.fn.flowplayer&&$("video").parent(".flowplayer").flowplayer()});var instances=[],extensions=[],UA=window.navigator.userAgent;window.flowplayer=function(e){return $.isFunction(e)?extensions.push(e):"number"==typeof e||void 0===e?instances[e||0]:$(e).data("flowplayer")},$(window).on("beforeunload",function(){$.each(instances,function(e,o){o.conf.splash?o.unload():o.bind("error",function(){$(".flowplayer.is-error .fp-message").remove()})})});var supportLocalStorage=!1;try{"object"==typeof window.localStorage&&(window.localStorage.flowplayerTestStorage="test",supportLocalStorage=!0)}catch(ignored){}var isSafari=/Safari/.exec(navigator.userAgent)&&!/Chrome/.exec(navigator.userAgent);m=/(\d+\.\d+) Safari/.exec(navigator.userAgent),safariVersion=m?Number(m[1]):100,$.extend(flowplayer,{version:"@VERSION",engine:{},conf:{},support:{},defaults:{debug:!1,disabled:!1,engine:"html5",fullscreen:window==window.top,keyboard:!0,ratio:9/16,adaptiveRatio:!1,flashfit:!1,rtmp:0,splash:!1,live:!1,swf:"//@CDN/@VERSION/@CDN_PATHflowplayer.swf",speeds:[.25,.5,1,1.5,2],tooltip:!0,volume:supportLocalStorage?"true"==localStorage.muted?0:isNaN(localStorage.volume)?1:localStorage.volume||1:1,errors:["","Video loading aborted","Network error","Video not properly encoded","Video file not found","Unsupported video","Skin not found","SWF file not found","Subtitles not found","Invalid RTMP URL","Unsupported video format. Try installing Adobe Flash."],errorUrls:["","","","","","","","","","","http://get.adobe.com/flashplayer/"],playlist:[],hlsFix:isSafari&&safariVersion<8}});var playerCount=1;$.fn.flowplayer=function(e,o){return"string"==typeof e&&(e={swf:e}),$.isFunction(e)&&(o=e,e={}),!e&&this.data("flowplayer")||this.each(function(){var a,n,i=$(this).addClass("is-loading"),t=$.extend({},flowplayer.defaults,flowplayer.conf,e,i.data()),r=$("video",i).addClass("fp-engine").removeAttr("controls"),s=r.length?new URLResolver(r):null,l={};if(t.playlist.length){var d,u=t.preload||r.attr("preload");r.length&&r.replaceWith(d=$("<p />")),r=$("<video />").addClass("fp-engine"),d?d.replaceWith(r):i.prepend(r),flowplayer.support.video&&r.attr("preload",u),"string"==typeof t.playlist[0]?r.attr("src",t.playlist[0]):$.each(t.playlist[0],function(e,o){for(var a in o)o.hasOwnProperty(a)&&r.append($("<source />").attr({type:"video/"+a,src:o[a]}))}),s=new URLResolver(r)}var p=i.data("flowplayer");p&&p.unload(),i.data("fp-player_id",i.data("fp-player_id")||playerCount++);try{l=supportLocalStorage?window.localStorage:l}catch(f){}var c=this.currentStyle&&"rtl"===this.currentStyle.direction||window.getComputedStyle&&"rtl"===window.getComputedStyle(this,null).getPropertyValue("direction");c&&i.addClass("is-rtl");var g=p||{conf:t,currentSpeed:1,volumeLevel:"undefined"==typeof t.volume?1*l.volume:t.volume,video:{},disabled:!1,finished:!1,loading:!1,muted:"true"==l.muted||t.muted,paused:!1,playing:!1,ready:!1,splash:!1,rtl:c,load:function(e,o){if(!(g.error||g.loading||g.disabled)){if(e=s.resolve(e),$.extend(e,n.pick(e.sources)),e.src){var a=$.Event("load");i.trigger(a,[g,e,n]),a.isDefaultPrevented()?g.loading=!1:(n.load(e),$.isFunction(e)&&(o=e),o&&i.one("ready",o))}return g}},pause:function(e){return!g.ready||g.seeking||g.disabled||g.loading||(n.pause(),g.one("pause",e)),g},resume:function(){return g.ready&&g.paused&&!g.disabled&&(n.resume(),g.finished&&(g.trigger("resume",[g]),g.finished=!1)),g},toggle:function(){return g.ready?g.paused?g.resume():g.pause():g.load()},seek:function(e,o){if(g.ready&&!g.live){if("boolean"==typeof e){var t=.1*g.video.duration;e=g.video.time+(e?t:-t)}e=a=Math.min(Math.max(e,0),g.video.duration).toFixed(1);var r=$.Event("beforeseek");i.trigger(r,[g,e]),r.isDefaultPrevented()?(g.seeking=!1,i.toggleClass("is-seeking",g.seeking)):(n.seek(e),$.isFunction(o)&&i.one("seek",o))}return g},seekTo:function(e,o){var n=void 0===e?a:.1*g.video.duration*e;return g.seek(n,o)},mute:function(e){return void 0===e&&(e=!g.muted),l.muted=g.muted=e,l.volume=isNaN(l.volume)?t.volume:l.volume,g.volume(e?0:l.volume,!0),g.trigger("mute",e),g},volume:function(e,o){return g.ready&&(e=Math.min(Math.max(e,0),1),o||(l.volume=e),n.volume(e)),g},speed:function(e,o){return g.ready&&("boolean"==typeof e&&(e=t.speeds[$.inArray(g.currentSpeed,t.speeds)+(e?1:-1)]||g.currentSpeed),n.speed(e),o&&i.one("speed",o)),g},stop:function(){return g.ready&&(g.pause(),g.seek(0,function(){i.trigger("stop")})),g},unload:function(){return i.hasClass("is-embedding")||(t.splash?(g.trigger("unload"),n.unload()):g.stop()),g},disable:function(e){return void 0===e&&(e=!g.disabled),e!=g.disabled&&(g.disabled=e,g.trigger("disable",e)),g}};g.conf=$.extend(g.conf,t),$.each(["bind","one","unbind"],function(e,o){g[o]=function(e,a){return i[o](e,a),g}}),g.trigger=function(e,o){return i.trigger(e,[g,o]),g},i.data("flowplayer")||i.bind("boot",function(){return $.each(["autoplay","loop","preload","poster"],function(e,o){var a=r.attr(o);void 0!==a&&(t[o]=a?a:!0)}),(t.splash||i.hasClass("is-splash")||!flowplayer.support.firstframe)&&(g.forcedSplash=!t.splash&&!i.hasClass("is-splash"),g.splash=t.splash=t.autoplay=!0,i.addClass("is-splash"),flowplayer.support.video&&r.attr("preload","none")),(t.live||i.hasClass("is-live"))&&(g.live=t.live=!0,i.addClass("is-live")),$.each(extensions,function(){this(g,i)}),n=flowplayer.engine[t.engine],n&&(n=n(g,i)),n.pick(s.initialSources)?g.engine=t.engine:$.each(flowplayer.engine,function(e){return e!=t.engine&&(n=this(g,i),n.pick(s.initialSources))?(g.engine=e,!1):void 0}),instances.push(g),g.engine?(t.splash?g.unload():g.load(),t.disabled&&g.disable(),n.volume(g.volumeLevel),void i.one("ready",o)):g.trigger("error",{code:flowplayer.support.flashVideo?5:10})}).bind("load",function(e,o){t.splash&&$(".flowplayer").filter(".is-ready, .is-loading").not(i).each(function(){var e=$(this).data("flowplayer");e.conf.splash&&e.unload()}),i.addClass("is-loading"),o.loading=!0}).bind("ready",function(e,o,a){function n(){i.removeClass("is-loading"),o.loading=!1}a.time=0,o.video=a,t.splash?i.one("progress",n):n(),o.muted?o.mute(!0):o.volume(o.volumeLevel);var r=o.conf.hlsFix&&/mpegurl/i.exec(a.type);i.toggleClass("hls-fix",!!r)}).bind("unload",function(){t.splash&&r.remove(),i.removeClass("is-loading"),g.loading=!1}).bind("ready unload",function(e){var o="ready"==e.type;i.toggleClass("is-splash",!o).toggleClass("is-ready",o),g.ready=o,g.splash=!o}).bind("progress",function(e,o,a){o.video.time=a}).bind("speed",function(e,o,a){o.currentSpeed=a}).bind("volume",function(e,o,a){o.volumeLevel=Math.round(100*a)/100,o.muted?a&&o.mute(!1):l.volume=a}).bind("beforeseek seek",function(e){g.seeking="beforeseek"==e.type,i.toggleClass("is-seeking",g.seeking)}).bind("ready pause resume unload finish stop",function(e,o,a){g.paused=/pause|finish|unload|stop/.test(e.type),"ready"==e.type&&(g.paused="none"==t.preload,a&&(g.paused=!a.duration||!t.autoplay&&"none"!=t.preload)),g.playing=!g.paused,i.toggleClass("is-paused",g.paused).toggleClass("is-playing",g.playing),g.load.ed||g.pause()}).bind("finish",function(){g.finished=!0}).bind("error",function(){r.remove()}),i.trigger("boot",[g,i]).data("flowplayer",g)})};
