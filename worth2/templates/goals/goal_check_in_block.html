{% load bootstrap %}
{% load avatar %}

<div class="goal-check-in" id="goal-checkin-block">
    <h1>My Goals</h1>

    <h2>Goal Check In</h2>

    <p>Here's what you committed to do during the last session.</p>

    <form class="form-horizontal" method="post">{% csrf_token %}
        {{ checkin_formset.management_form }}

        {% comment %}
        This is kind of non-standard but necessary because we need to
        iterate over the goal setting responses and the goal checkin
        formset at the same time. I've done this by zipping them
        together and putting them in the view's context.
        {% endcomment %}
        {% for t in goal_checkin_context %}
        <div class="well checkin-group">
            <div class="form-group non-interactive">
                <label class="control-label col-sm-2">
                    My {{ t.0.goal_setting_block.get_goal_type_display }} Goal
                </label>
                <div class="col-sm-10">
                    <p class="form-control-static">
                        {{ t.0.option }}
                    </p>
                </div>
            </div>
            <div class="form-group non-interactive">
                <label class="control-label col-sm-2">
                    I will do this.
                </label>
                <div class="col-sm-10">
                    <p class="form-control-static">
                        {{ t.0.text }}
                    </p>
                </div>
            </div>
            {{ t.1|bootstrap_horizontal }}
        </div>
        {% endfor %}

        <div class="form-group">
            <div class="col-sm-10">
                <button type="submit" class="btn btn-primary">Submit</button>
            </div>
        </div>
    </form>

    <div class="col-sm-2 avatar-block">
        <img src="{% avatar_url user %}">
    </div>

    <div class="clearfix"><div>
</div>
